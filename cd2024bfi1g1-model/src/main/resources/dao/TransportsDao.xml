<?xml version="1.0" encoding="UTF-8"?>
<JdbcEntitySetup xmlns="http://www.ontimize.com/schema/jdbc"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://www.ontimize.com/schema/jdbc http://www.ontimize.com/schema/jdbc/ontimize-jdbc-dao.xsd"
                 catalog="" schema="${mainschema}" table="transports" datasource="mainDataSource"
                 sqlhandler="dbSQLStatementHandler">
    <DeleteKeys>
        <Column>TRP_ID</Column>
    </DeleteKeys>
    <UpdateKeys>
        <Column>TRP_ID</Column>
    </UpdateKeys>
    <GeneratedKey>trp_id</GeneratedKey>
    <Queries>
        <Query id="default">
            <AmbiguousColumns>
                <AmbiguousColumn name="CNT_ID" prefix="t" />
                <AmbiguousColumn name="VHC_ID" prefix="t" />
                <AmbiguousColumn name="CMP_ID" prefix="c" />
                <AmbiguousColumn name="LOC_ID" prefix="lo" />
                <AmbiguousColumn name="LOC_ID" prefix="ld" />
            </AmbiguousColumns>
            <Sentence>
                <![CDATA[
            SELECT
                t.TRP_ID,
                lo.LOC_NAME AS ORIGIN_NAME,
                ld.LOC_NAME AS DESTINATION_NAME,
                c.CNT_NAME,
                v.VHC_PLATE,
                t.TRP_DATE
            FROM transports t
            LEFT JOIN vehicles v ON t.VHC_ID = v.VHC_ID
            LEFT JOIN containers c ON t.CNT_ID = c.CNT_ID
            LEFT JOIN locations lo ON t.TRP_ORIGIN = lo.LOC_ID
            LEFT JOIN locations ld ON t.TRP_DESTINATION = ld.LOC_ID
            #WHERE#
            #ORDER#
        ]]>
            </Sentence>
        </Query>
        <Query id="movility">
            <Sentence>
                <![CDATA[
                    with tmv as (
                        SELECT c.*
                        FROM containers c
                        WHERE c.cnt_mobility
                    )
                    SELECT * FROM tmv #WHERE#;
                ]]>
            </Sentence>
        </Query>
        <Query id="locations">
            <AmbiguousColumns>
                <AmbiguousColumn name="LOC_ID" prefix="t" />
                <AmbiguousColumn name="CMP_ID" prefix="t" />
            </AmbiguousColumns>
            <Sentence>
                <![CDATA[
                    with des as (
                        SELECT l.*
                        FROM locations l
                    )
                    SELECT * FROM des #WHERE#;
                ]]>
            </Sentence>
        </Query>
        <Query id="matriculas">
            <AmbiguousColumns>
                <AmbiguousColumn name="VHC_ID" prefix="t" />
                <AmbiguousColumn name="CMP_ID" prefix="t" />
            </AmbiguousColumns>
            <Sentence>
                <![CDATA[
                    with plt as (
                        SELECT v.*
                        FROM vehicles v
                    )
                    SELECT * FROM plt #WHERE#;
                ]]>
            </Sentence>
        </Query>
    </Queries>
</JdbcEntitySetup>